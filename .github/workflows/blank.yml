name: Terraform-workflow-WE

on: 
  workflow_dispatch:
  # push:
    # branches: [ main ]
    # paths:
    #   - '**.tf'
    
env:
  TF_IN_AUTOMATION: true
  TF_INPUT: false

jobs:
  plan:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout foundation-azure-infra-app-we Repository
        uses: actions/checkout@v4

      - name: Check secret visibility
          run: echo "Has TERRAFORM_REPO? ${{ secrets.TERRAFORM_REPO != '' }}"
      
      - name: Checkout 002-ccoe-infra-modules
        uses: actions/checkout@v4
        with:
          repository: bkainth1/terraform-repo
          token: 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
          ref: main
          path: 002-ccoe-infra-modules

      - name: Check directory
        run: |
           ls -lrt
           cd 002-ccoe-infra-modules
           ls -lrt

    

       
